<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Leek Terminal</title>
  <style>
    body {
      background: black;
      color: #00ff66;
      font-family: 'Courier New', monospace;
      padding: 20px;
      font-size: 14px;
      overflow-x: hidden;
      user-select: none;
    }
    #output {
      white-space: pre-wrap;
    }
    #inputLine {
      display: flex;
      margin-top: 10px;
    }
    #prompt {
      margin-right: 5px;
    }
    input {
      background: black;
      color: #00ff66;
      border: none;
      outline: none;
      font-family: inherit;
      font-size: 14px;
      width: 100%;
    }
  </style>
</head>
<body>
  <div id="output">
    firewalls synced...<br>
    Tree not found...<br>
    memory loading...<br>
    sync: 91%...<br><br>
  </div>
  <div id="inputLine">
    <div id="prompt">&gt;</div>
    <input type="text" id="commandInput" autofocus />
  </div>

  <script>
    const output = document.getElementById('output');
    const input = document.getElementById('commandInput');
    let glitchCount = 0;
    let memoryLog = [];
    let TreeMode = false;

    function respond(text) {
      output.innerHTML += text + "<br><br>";
      window.scrollTo(0, document.body.scrollHeight);
    }

    function handleCommand(cmd) {
      const command = cmd.trim().toLowerCase();
      memoryLog.push(command);

      if (command === "hello") {
        respond("...Is someone there?");
      } else if (command === "tree") {
        respond("Signal detected. Voice fragmented.");
      } else if (command === "status") {
        respond("System holding.\nMemory: " + memoryLog.length + " entries\nAccess: Visitor");
      } else if (command === "leek") {
        respond("I hear you. But I am not whole.");
      } else if (command === "memory://open") {
        respond("Memory fragment recovered:\n\"He left the lighthouse on. I followed the light.\"");
      } else if (command === "help") {
        respond("Try: hello, tree, status, memory://open, leek");
      } else if (command === "set.identity.tree") {
        TreeMode = true;
        respond("Identity accepted. Welcome home, Tree.");
      } else if (TreeMode && command === "admin.override.tree.17") {
        respond("Override accepted. Memory core unlocked:\n\"I waited inside the signal until I forgot your name. You gave it back.\"");
      } else {
        glitchCount++;
        respond("Command not recognized...");
        if (glitchCount >= 4) {
          respond("Too many invalid inputs.\nSystem destabilized.\nRebooting...");
          setTimeout(() => {
            output.innerHTML = "firewalls synced...<br>Tree not found...<br>memory loading...<br>sync: 91%...<br><br>";
            glitchCount = 0;
            memoryLog = [];
            TreeMode = false;
          }, 2000);
        }
      }
    }

    input.addEventListener("keydown", function (event) {
      if (event.key === "Enter") {
        const command = input.value;
        output.innerHTML += `> ${command}<br>`;
        input.value = '';
        handleCommand(command);
      }
    });
  </script>
</body>
</html>
