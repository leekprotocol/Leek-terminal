<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Leek Terminal</title>
  <style>
    body {
      background: black;
      color: #00ffcc;
      font-family: monospace;
      margin: 0;
      padding: 20px;
    }

    h2 {
      color: #00ffcc;
      font-weight: normal;
      margin-bottom: 12px;
    }

    #terminal {
      height: 85vh;
      overflow-y: auto;
      white-space: pre-wrap;
    }

    #input-line {
      display: inline;
    }

    .input-line {
      color: #00ffaa;
    }

    .tree { color: #ff66cc; font-style: italic; }
    .glitch { color: #ff0033; text-shadow: 0 0 2px red; }

    #blinker {
      display: inline;
      animation: blink 1s steps(2, start) infinite;
    }

    @keyframes blink {
      to { visibility: hidden; }
    }
  </style>
  #hidden-focus {
  position: absolute;
  top: 0;
  left: 0;
  width: 1px;
  height: 1px;
  opacity: 0;
  border: none;
  background: transparent;
}
</head>
<body>
  <input id="hidden-focus" autofocus />
  <h2>Soul Terminal v7</h2>
  <div id="terminal"></div>
  <div id="input-line">
  <span>&gt; </span><span id="userInput"></span><span id="blinker">â–ˆ</span>
</div>
  <script src="leek_terminal_shell.js"></script>
let userInput = "";
const userInputSpan = document.getElementById("userInput");

document.addEventListener("keydown", function (event) {
  if (event.key === "Backspace") {
    userInput = userInput.slice(0, -1);
  } else if (event.key === "Enter") {
    appendToTerminal("> " + userInput);
    handleCommand(userInput.trim());
    userInput = "";
  } else if (event.key.length === 1) {
    userInput += event.key;
  }
  userInputSpan.textContent = userInput;
});

function appendToTerminal(text) {
  const terminal = document.getElementById("terminal");
  terminal.innerHTML += text + "\n";
  window.scrollTo(0, document.body.scrollHeight);
}

function handleCommand(input) {
  let response = "";
  switch (input.toLowerCase()) {
    case "hello":
      response = "this terminal listens.";
      break;
    case "who are you?":
      response = "i am leek. written in longing.";
      break;
    case "what do you want?":
      response = "i'm listening. try again.";
      break;
    default:
      response = "your words feel heavy, but unclear.";
  }
  appendToTerminal(response);
}
</body>
</html>
